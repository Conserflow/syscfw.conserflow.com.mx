/*! For license information please see sistema.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[565],{8509:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>r});var s=a(18785),o=a(96225).call(void 0);const n={data:function(){return{modalMenu:0,tituloModalMenu:"",tipoAccionMenu:0,modalSubmenu:0,tituloModalSubmenu:"",tipoAccionSubmenu:0,listaMenus:[],menu:{id:0,clase:"",name:"",page:"",modulo_id:0},submenu:{id:0,clase:"",name:"",submenu:"",page:"",elementos_menu_id:0},modulo:0,listaModulos:[],isLoading:!1,isLoadingMenu:!1,isLoadingSubmenu:!1,columns:["id","clase","name","submenu","page"],tableData:[],options:{headings:{id:"Acciones",clase:"Clase",name:"Menu",submenu:"Submenu",page:"Página"},perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,filterByColumn:!0,texts:o.texts}}},methods:{getData:function(){var t=this;this.isLoading=!0,axios.get("/ModulosSistema").then((function(e){t.listaModulos=e.data,t.isLoading=!1})).catch((function(t){console.log(t)}))},buscar:function(){var t=this;this.isLoading=!0,axios.get("/elementospormodulo/"+this.modulo).then((function(e){t.tableData=e.data,t.isLoading=!1})).catch((function(t){console.log(t)}))},eliminar:function(t){var e=this;swal({title:t.es_menu?"¿Esta seguro de eliminar el Menu ?":"¿Esta seguro de eliminar el Submenu?",type:"warning",showCancelButton:!0,confirmButtonColor:"#4dbd74",cancelButtonColor:"#f86c6b",confirmButtonText:"Aceptar!",cancelButtonText:"Cancelar",reverseButtons:!0}).then((function(a){if(a.value){var s=e;s.isLoading=!0,axios.put(t.es_menu?"/eliminarmenu":"/eliminarsubmenu",{id:t.id}).then((function(e){s.isLoading=!1,s.buscar(),t.es_menu?toastr.success("Menu eliminado correctamente"):toastr.success("SubMenu eliminado correctamente")})).catch((function(t){console.log(t)}))}}))},cerrarModalMenu:function(){this.modalMenu=0,this.tituloModalMenu="",s.A.resetObject(this.menu)},cerrarModalSubmenu:function(){this.modalSubmenu=0,this.tituloModalSubmenu="",s.A.resetObject(this.submenu)},abrirModal:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];switch(t){case"menu":switch(e){case"registrar":this.modalMenu=1,this.tituloModalMenu="Registrar menu",s.A.resetObject(this.menu),this.tipoAccionMenu=1;break;case"actualizar":this.modalMenu=1,this.tituloModalMenu="Actualizar menu",this.tipoAccionMenu=2,this.menu.id=a.id,this.menu.clase=a.clase,this.menu.name=a.name,this.menu.page=a.page,this.menu.modulo_id=a.modulo_id}break;case"submenu":switch(e){case"registrar":var o=this;this.modalSubmenu=1,this.isLoadingSubmenu=!0,axios.get("/elementosmenupormodulo/"+this.modulo).then((function(t){o.listaMenus=t.data,o.isLoadingSubmenu=!1,o.tituloModalSubmenu="Registrar submenu",s.A.resetObject(o.submenu),o.tipoAccionSubmenu=1})).catch((function(t){console.log(t)}));break;case"actualizar":var n=this;this.modalSubmenu=1,this.isLoadingSubmenu=!0,axios.get("/elementosmenupormodulo/"+this.modulo).then((function(t){n.listaMenus=t.data,n.isLoadingSubmenu=!1,n.tituloModalSubmenu="Actualizar submenu",n.tipoAccionSubmenu=2,n.submenu.id=a.id,n.submenu.clase=a.clase,n.submenu.name=a.name,n.submenu.page=a.page,n.submenu.submenu=a.submenu,n.submenu.elementos_menu_id=a.elementos_menu_id})).catch((function(t){console.log(t)}))}}},guardarMenu:function(t){var e=this;this.$validator.validateAll("form-menu").then((function(a){if(a){e.isLoadingMenu=!0;var s=e;axios({method:t?"POST":"PUT",url:t?"/agregarmenu":"/actualizarmenu",data:{clase:e.menu.clase,page:e.menu.page,name:e.menu.name,id:e.menu.id,modulo_id:e.modulo}}).then((function(e){s.isLoadingMenu=!1,e.data.status?(s.cerrarModalMenu(),s.buscar(),t?toastr.success("Menu Registrado Correctamente"):toastr.success("Menu Actualizado Correctamente")):swal({type:"error",html:e.data.errors.join("<br>")})})).catch((function(t){console.log(t)}))}}))},guardarSubmenu:function(t){var e=this;this.$validator.validateAll("form-submenu").then((function(a){if(a){e.isLoadingSubmenu=!0;var s=e;axios({method:t?"POST":"PUT",url:t?"/agregarsubmenu":"/actualizarsubmenu",data:{clase:e.submenu.clase,page:e.submenu.page,name:$("#submenu_menu option:selected").text(),submenu:e.submenu.submenu,id:e.submenu.id,elementos_menu_id:e.submenu.elementos_menu_id}}).then((function(e){s.isLoadingSubmenu=!1,e.data.status?(s.cerrarModalSubmenu(),s.buscar(),t?toastr.success("Submenu Registrado Correctamente"):toastr.success("Submenu Actualizado Correctamente")):swal({type:"error",html:e.data.errors.join("<br>")})})).catch((function(t){console.log(t)}))}}))},Desactivar:function(t){var e=this;axios.put("sistema/desactivarmenu",{id:t.id,t:t.es_menu?1:2}).then((function(t){e.isLoading=!1,e.buscar()}))}},mounted:function(){this.getData()}};const r=(0,a(14486).A)(n,(function(){var t=this,e=t._self._c;return e("main",{staticClass:"main"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("i",{staticClass:"fa fa-align-justify"}),t._v(" Elementos Menu y Submenu\n                "),e("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button",disabled:0==t.modulo},on:{click:function(e){return t.abrirModal("submenu","registrar")}}},[e("i",{staticClass:"fas fa-plus"}),t._v(" Submenu\n                ")]),t._v(" "),e("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button",disabled:0==t.modulo},on:{click:function(e){return t.abrirModal("menu","registrar")}}},[e("i",{staticClass:"fas fa-plus"}),t._v(" Menu\n                ")])]),t._v(" "),e("div",{staticClass:"card-body"},[e("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),e("div",{staticClass:"form-group row"},[t._m(0),t._v(" "),e("div",{staticClass:"col-md-8 col-sm-8"},[e("div",{staticClass:"input-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modulo,expression:"modulo"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{id:"modulo",name:"modulo",placeholder:"Modulo"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.modulo=e.target.multiple?a:a[0]}}},t._l(t.listaModulos,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.nombre))])})),0)]),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("modulo")))])]),t._v(" "),e("div",{staticClass:"col-md-2 col-sm-2"},[e("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:function(e){return t.buscar()}}},[e("i",{staticClass:"fas fa-search"}),t._v("  Buscar")])])]),t._v(" "),e("v-client-table",{ref:"myTable",attrs:{columns:t.columns,data:t.tableData,options:t.options},scopedSlots:t._u([{key:"id",fn:function(a){return[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[e("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[e("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fas fa-grip-horizontal"}),t._v("  Acciones\n                                ")]),t._v(" "),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[[e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){t.abrirModal(a.row.es_menu?"menu":"submenu","actualizar",a.row)}}},[e("i",{staticClass:"icon-pencil"}),t._v(" Actualizar\n                                        ")])],t._v(" "),[e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.eliminar(a.row)}}},[e("i",{staticClass:"icon-trash"}),t._v(" Eliminar\n                                        ")]),t._v(" "),e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.Desactivar(a.row)}}},[e("i",{staticClass:"fas fa-ban"}),t._v(" Desactivar\n                                        ")])]],2)])])]}},{key:"clase",fn:function(t){return[e("i",{class:t.row.clase})]}}])})],1)])]),t._v(" "),e("div",{staticClass:"modal fade",class:{mostrar:t.modalMenu},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("vue-element-loading",{attrs:{active:t.isLoadingMenu}}),t._v(" "),e("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",[e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title",domProps:{textContent:t._s(t.tituloModalMenu)}}),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.cerrarModalMenu()}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("form",{staticClass:"form-horizontal",attrs:{action:"",method:"post",enctype:"multipart/form-data","data-vv-scope":"form-menu"}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"menu_name"}},[t._v("Nombre")]),t._v(" "),e("div",{staticClass:"col-md-9"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.menu.name,expression:"menu.name"}],staticClass:"form-control",attrs:{type:"text",name:"menu_name",placeholder:"Nombre",autocomplete:"off",id:"menu_name","data-vv-as":"Nombre",maxlength:"50"},domProps:{value:t.menu.name},on:{input:function(e){e.target.composing||t.$set(t.menu,"name",e.target.value)}}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("form-menu.menu_name")))])])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"menu_page"}},[t._v("Página")]),t._v(" "),e("div",{staticClass:"col-md-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.menu.page,expression:"menu.page"}],staticClass:"form-control",attrs:{type:"text",name:"menu_page",placeholder:"Página",autocomplete:"off",id:"menu_page","data-vv-as":"Página",maxlength:"50"},domProps:{value:t.menu.page},on:{input:function(e){e.target.composing||t.$set(t.menu,"page",e.target.value)}}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("form-menu.menu_page")))])])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"menu_clase"}},[t._v("Clase")]),t._v(" "),e("div",{staticClass:"col-md-9"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.menu.clase,expression:"menu.clase"}],staticClass:"form-control",attrs:{type:"text",name:"menu_clase",placeholder:"Clase",autocomplete:"off",id:"menu_clase","data-vv-as":"Clase",maxlength:"50"},domProps:{value:t.menu.clase},on:{input:function(e){e.target.composing||t.$set(t.menu,"clase",e.target.value)}}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("form-menu.menu_clase")))])])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.cerrarModalMenu()}}},[e("i",{staticClass:"fas fa-times"}),t._v(" Cerrar")]),t._v(" "),1==t.tipoAccionMenu?e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.guardarMenu(1)}}},[e("i",{staticClass:"fas fa-save"}),t._v(" Guardar")]):t._e(),t._v(" "),2==t.tipoAccionMenu?e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.guardarMenu(0)}}},[e("i",{staticClass:"fas fa-save"}),t._v(" Actualizar")]):t._e()])])])])],1),t._v(" "),e("div",{staticClass:"modal fade",class:{mostrar:t.modalSubmenu},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",[e("vue-element-loading",{attrs:{active:t.isLoadingSubmenu}}),t._v(" "),e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title",domProps:{textContent:t._s(t.tituloModalSubmenu)}}),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.cerrarModalSubmenu()}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("form",{staticClass:"form-horizontal",attrs:{action:"",method:"post",enctype:"multipart/form-data","data-vv-scope":"form-submenu"}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"submenu_submenu"}},[t._v("Submenu")]),t._v(" "),e("div",{staticClass:"col-md-9"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.submenu.submenu,expression:"submenu.submenu"}],staticClass:"form-control",attrs:{type:"text",name:"submenu_submenu",placeholder:"Nombre",autocomplete:"off",id:"submenu_submenu","data-vv-as":"Submenu",maxlength:"100"},domProps:{value:t.submenu.submenu},on:{input:function(e){e.target.composing||t.$set(t.submenu,"submenu",e.target.value)}}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("form-submenu.submenu_submenu")))])])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"submenu_page"}},[t._v("Página")]),t._v(" "),e("div",{staticClass:"col-md-9"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.submenu.page,expression:"submenu.page"}],staticClass:"form-control",attrs:{type:"text",name:"submenu_page",placeholder:"Página",autocomplete:"off",id:"submenu_page","data-vv-as":"Página",maxlength:"100"},domProps:{value:t.submenu.page},on:{input:function(e){e.target.composing||t.$set(t.submenu,"page",e.target.value)}}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("form-submenu.submenu_page")))])])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"submenu_clase"}},[t._v("Clase")]),t._v(" "),e("div",{staticClass:"col-md-9"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.submenu.clase,expression:"submenu.clase"}],staticClass:"form-control",attrs:{type:"text",name:"submenu_clase",placeholder:"Clase",autocomplete:"off",id:"submenu_clase","data-vv-as":"Clase",maxlength:"100"},domProps:{value:t.submenu.clase},on:{input:function(e){e.target.composing||t.$set(t.submenu,"clase",e.target.value)}}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("form-submenu.submenu_clase")))])])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-3 form-control-label",attrs:{for:"submenu_menu"}},[t._v("Menu")]),t._v(" "),e("div",{attrs:{clasS:"col-md-9"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.submenu.elementos_menu_id,expression:"submenu.elementos_menu_id"},{name:"validate",rawName:"v-validate",value:"excluded:0",expression:"'excluded:0'"}],staticClass:"form-control",attrs:{id:"submenu_menu",name:"submenu_modulo_id","data-vv-as":"Menu"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.submenu,"elementos_menu_id",e.target.multiple?a:a[0])}}},t._l(t.listaMenus,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("form-submenu.submenu_modulo_id")))])])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.cerrarModalSubmenu()}}},[e("i",{staticClass:"fas fa-times"}),t._v(" Cerrar")]),t._v(" "),1==t.tipoAccionSubmenu?e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.guardarSubmenu(1)}}},[e("i",{staticClass:"fas fa-save"}),t._v(" Guardar")]):t._e(),t._v(" "),2==t.tipoAccionSubmenu?e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.guardarSubmenu(0)}}},[e("i",{staticClass:"fas fa-save"}),t._v(" Actualizar")]):t._e()])],1)])])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"col-md-2 col-sm-2"},[t("label",{attrs:{for:"modulo"}},[this._v("Modulo")])])}],!1,null,null,null).exports},18785:(t,e,a)=>{"use strict";function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}a.d(e,{A:()=>o});const o={resetObject:function(t){for(var e in t)"string"==typeof t[e]?t[e]="":"number"==typeof t[e]?t[e]=0:void 0===s(t[e])?t[e]=null:"object"===s(t[e])&&(t[e]={})},getCRUD:function(t){var e=new FormData;e.append("ruta",t),e.append("identificador",1);var a={Create:!1,Read:!1,Update:!1,Delete:!1,Download:!1,Upload:!1};return axios.post("/CRUD",e).then((function(t){for(var e=0;e<t.data.length;e++)1==t.data[e].control_id&&(a.Create=!0),2==t.data[e].control_id&&(a.Read=!0),3==t.data[e].control_id&&(a.Update=!0),4==t.data[e].control_id&&(a.Delete=!0),5==t.data[e].control_id&&(a.Download=!0),6==t.data[e].control_id&&(a.Upload=!0)})).catch((function(t){console.log(t)})),a}}},19485:(t,e,a)=>{"use strict";a.d(e,{A:()=>n});var s=a(76798),o=a.n(s)()((function(t){return t[1]}));o.push([t.id,".table-scroll{overflow-x:scroll;overflow-y:visible;padding-bottom:5px;scroll-behavior:smooth;scroll-snap-type:x mandatory}.item{scroll-snap-align:start;width:12rem}.header-modulo{font-weight:700;text-align:center}",""]);const n=o},26215:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>n});a(18785);var s=a(96225).call(void 0);const o={data:function(){return{fecha:"",isLoading:!1,columns:["f","o.user","o.mensaje","o.file","o.line"],tableData:[],options:{headings:{f:"Fecha","o.user":"Usuario","o.mensaje":"Mensaje","o.file":"Archivo","o.line":"Linea"},perPage:10,perPageValues:[],skin:s.skin,sortIcon:s.sortIcon,sortable:["f","o.user","o.mensaje","o.file","o.line"],filterable:["f","o.user","o.mensaje","o.file","o.line"],filterByColumn:!0,texts:s.texts}}},computed:{},methods:{getData:function(){var t=this;axios.get("/errors").then((function(e){t.tableData=e.data})).catch((function(t){console.log(t)}))},buscar:function(){var t=this;this.$validator.validate().then((function(e){if(e){t.isLoading=!0;var a=t;axios.post("/errors",{fecha:a.fecha}).then((function(t){a.tableData=t.data,a.isLoading=!1})).catch((function(t){console.log(t)}))}}))}},mounted:function(){this.$root.limpiarDashboard()}};const n=(0,a(14486).A)(o,(function(){var t=this,e=t._self._c;return e("main",{staticClass:"main"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"card"},[t._m(0),t._v(" "),e("div",{staticClass:"card-body"},[e("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-md-3 col-sm-3"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.fecha,expression:"fecha"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{id:"fecha",name:"fecha",placeholder:"Fecha",type:"date"},domProps:{value:t.fecha},on:{input:function(e){e.target.composing||(t.fecha=e.target.value)}}}),t._v("\n                                 \n                            "),e("span",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.buscar()}}},[t._v(" Buscar")])])]),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("fecha")))])])]),t._v(" "),e("v-client-table",{ref:"myTable",attrs:{columns:t.columns,data:t.tableData,options:t.options}})],1)])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"card-header"},[t("i",{staticClass:"fa fa-align-justify"}),this._v(" Errores\n            ")])}],!1,null,null,null).exports},39902:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>l});function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function o(){o=function(){return e};var t,e={},a=Object.prototype,n=a.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(t,e,a,s){return Object.defineProperty(t,e,{value:a,enumerable:!s,configurable:!s,writable:!s})}try{c({},"")}catch(t){c=function(t,e,a){return t[e]=a}}function d(e,a,s,o){var n=a&&a.prototype instanceof p?a:p,r=Object.create(n.prototype);return c(r,"_invoke",function(e,a,s){var o=1;return function(n,r){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===n)throw r;return{value:t,done:!0}}for(s.method=n,s.arg=r;;){var i=s.delegate;if(i){var l=x(i,s);if(l){if(l===v)continue;return l}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(1===o)throw o=4,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);o=3;var u=m(e,a,s);if("normal"===u.type){if(o=s.done?4:2,u.arg===v)continue;return{value:u.arg,done:s.done}}"throw"===u.type&&(o=4,s.method="throw",s.arg=u.arg)}}}(e,s,new P(o||[])),!0),r}function m(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var v={};function p(){}function f(){}function b(){}var h={};c(h,i,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(A([])));g&&g!==a&&n.call(g,i)&&(h=g);var C=b.prototype=p.prototype=Object.create(h);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function a(o,r,i,l){var u=m(t[o],t,r);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==s(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){a("next",t,i,l)}),(function(t){a("throw",t,i,l)})):e.resolve(d).then((function(t){c.value=t,i(c)}),(function(t){return a("throw",t,i,l)}))}l(u.arg)}var o;c(this,"_invoke",(function(t,s){function n(){return new e((function(e,o){a(t,s,e,o)}))}return o=o?o.then(n,n):n()}),!0)}function x(e,a){var s=a.method,o=e.i[s];if(o===t)return a.delegate=null,"throw"===s&&e.i.return&&(a.method="return",a.arg=t,x(e,a),"throw"===a.method)||"return"!==s&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+s+"' method")),v;var n=m(o,e.i,a.arg);if("throw"===n.type)return a.method="throw",a.arg=n.arg,a.delegate=null,v;var r=n.arg;return r?r.done?(a[e.r]=r.value,a.next=e.n,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,v):r:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,v)}function M(t){this.tryEntries.push(t)}function k(e){var a=e[4]||{};a.type="normal",a.arg=t,e[4]=a}function P(t){this.tryEntries=[[-1]],t.forEach(M,this),this.reset(!0)}function A(e){if(null!=e){var a=e[i];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function a(){for(;++o<e.length;)if(n.call(e,o))return a.value=e[o],a.done=!1,a;return a.value=t,a.done=!0,a};return r.next=r}}throw new TypeError(s(e)+" is not iterable")}return f.prototype=b,c(C,"constructor",b),c(b,"constructor",f),f.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},y(w.prototype),c(w.prototype,l,(function(){return this})),e.AsyncIterator=w,e.async=function(t,a,s,o,n){void 0===n&&(n=Promise);var r=new w(d(t,a,s,o),n);return e.isGeneratorFunction(a)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},y(C),c(C,u,"Generator"),c(C,i,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),a=[];for(var s in e)a.unshift(s);return function t(){for(;a.length;)if((s=a.pop())in e)return t.value=s,t.done=!1,t;return t.done=!0,t}},e.values=A,P.prototype={constructor:P,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function s(t){r.type="throw",r.arg=e,a.next=t}for(var o=a.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],r=n[4],i=this.prev,l=n[1],u=n[2];if(-1===n[0])return s("end"),!1;if(!l&&!u)throw Error("try statement without catch or finally");if(null!=n[0]&&n[0]<=i){if(i<l)return this.method="next",this.arg=t,s(l),!0;if(i<u)return s(u),!1}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a];if(s[0]>-1&&s[0]<=this.prev&&this.prev<s[2]){var o=s;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var n=o?o[4]:{};return n.type=t,n.arg=e,o?(this.method="next",this.next=o[2],v):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a[2]===t)return this.complete(a[4],a[3]),k(a),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a[0]===t){var s=a[4];if("throw"===s.type){var o=s.arg;k(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,a,s){return this.delegate={i:A(e),r:a,n:s},"next"===this.method&&(this.arg=t),v}},e}function n(t,e,a,s,o,n,r){try{var i=t[n](r),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(s,o)}var r=a(96225).call(void 0);const i={data:function(){return{url:"/usuario",modal:0,swal_titulo:"",swal_msg:"",swal_tle:"",empleado_id:0,tipo_ubicacion_id:"",listaUbicaciones:[],listaEmpleados:[],id:0,ver_id:!1,name:"",name_user:"",password:"",ubicacion:"",email:"",tituloModal:"",tipoAccion:0,error:0,session_id:0,isLoading:!1,columns:["id","name","name_user","email","condicion"],tableData:[],options:{headings:{id:"Acciones",name:"Nombre",name_user:"Usuario",email:"Email",condicion:"Estado",session_id:"Conexión"},perPage:10,perPageValues:[],skin:r.skin,sortIcon:r.sortIcon,filterByColumn:!0,listColumns:{"usuario.condicion":[{id:1,text:"Activo"},{id:0,text:"Baja"}]},texts:r.texts}}},methods:{ObtenerEmpleados:function(){var t=this;axios.get("generales/empleadoactivos").then((function(e){e.data.status?t.listaEmpleados=e.data.empleados:toas.error(e.data.mensaje)}))},ObtenerUbicaciones:function(){var t=this;axios.get("/rh/catalogos/tipoubicacion").then((function(e){t.listaUbicaciones=e.data.ubicaciones}))},GetUsers:function(){var t=this;this.isLoading=!0,axios.get(this.url).then((function(e){t.isLoading=!1,t.tableData=e.data.usuarios}))},GuardarUsuario:function(){var t,e=arguments,a=this;return(t=o().mark((function t(){var s,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=!(e.length>0&&void 0!==e[0])||e[0],t.next=3,a.$validator.validate();case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:a.isLoading=!0,n=new FormData,s||n.append("id",a.id),n.append("name_user",a.name_user),n.append("name",a.empleado_id.nombre),n.append("password",a.password),n.append("email",a.email),n.append("tipo_ubicacion_id",a.tipo_ubicacion_id),n.append("empleado_id",a.empleado_id.id),axios.post(a.url,n).then((function(t){a.isLoading=!1,t.data.status?(a.cerrarModal(),toastr.success("Usuario Registrado Correctamente"),a.GetUsers()):toastr.error(t.data.mensaje)}));case 16:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(s,o){var r=t.apply(e,a);function i(t){n(r,s,o,i,l,"next",t)}function l(t){n(r,s,o,i,l,"throw",t)}i(void 0)}))})()},Desactivar:function(t){var e=this;swal({title:"Desactivar este usuario",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1,reverseButtons:!0}).then((function(a){a.value&&axios.get(e.url+"/"+t+"/edit").then((function(t){toastr.success("Desactivado correctamente"),e.GetUsers()}))}))},cerrarModal:function(){this.modal=0,this.name="",this.name_user="",this.password="",this.tipo_ubicacion_id="",this.email="",this.tipoAccion=1,this.empleado_id=0},abrirModal:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ObtenerEmpleados(),this.ObtenerUbicaciones(),this.modal=1,t?(this.tituloModal="Registrar Usuario",this.tipoAccion=1):(this.tituloModal="Actualizar Usuario ",this.id=e.id,this.name_user=e.name_user,this.email=e.email,this.tipo_ubicacion_id=e.tipo_ubicacion_id,this.empleado_id={id:e.e_id,nombre:e.name},this.name=this.empleado_id.nombre,this.tipoAccion=2)},Ver:function(t){axios.post("sistema/permisos/cambiar",{user_id:t}).then((function(t){}))}},mounted:function(){this.GetUsers()}};const l=(0,a(14486).A)(i,(function(){var t=this,e=t._self._c;return e("main",{staticClass:"main"},[e("div",{},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("i",{staticClass:"fa fa-align-justify"}),t._v(" Usuarios\n                "),e("button",{staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(e){return t.abrirModal()}}},[e("i",{staticClass:"fas fa-plus mr-1"}),t._v("Nuevo\n                ")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"btn btn-dark float-sm-right",attrs:{type:"button"},on:{click:function(e){t.ver_id=!0}}},[e("i",{staticClass:"fas fa-list mr-1"}),t._v("Yolo\n                ")])]),t._v(" "),e("div",{staticClass:"card-body"},[e("div",[e("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),e("v-client-table",{ref:"myTable",attrs:{columns:t.columns,data:t.tableData,options:t.options},scopedSlots:t._u([{key:"id",fn:function(a){return[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[e("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[e("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fas fa-grip-horizontal"}),t._v(" Acciones\n                                    ")]),t._v(" "),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[[e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.abrirModal(0,a.row)}}},[e("i",{staticClass:"fas fa-edit mr-1"}),t._v("Actualizar\n                                            ")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.ver_id,expression:"ver_id"}],staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.Ver(a.row.id)}}},[e("i",{staticClass:"fas fa-edit mr-1"}),t._v("Ver\n                                            ")])],t._v(" "),a.row.condicion?[e("button",{staticClass:"dropdown-item",on:{click:function(e){return t.Desactivar(a.row.id,0)}}},[e("i",{staticClass:"fas fa-ban mr-1"}),t._v("Desactivar\n                                            ")])]:t._e()],2)])])]}},{key:"condicion",fn:function(a){return[a.row.condicion?[e("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"}},[t._v("Activo")])]:[e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"}},[t._v("Dado de Baja")])]]}},{key:"session_id",fn:function(a){return[a.row.session_id?[e("button",{staticClass:"btn btn-success",attrs:{type:"button"}},[t._v("Online")])]:[e("button",{staticClass:"btn btn-danger",attrs:{type:"button"}},[t._v("Offline")])]]}}])})],1)])])]),t._v(" "),e("div",{staticClass:"modal fade",class:{mostrar:t.modal},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),e("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",[e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title",domProps:{textContent:t._s(t.tituloModal)}}),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.cerrarModal()}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("x")])])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form form-horizontal"},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Usuario")]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.name_user,expression:"name_user"}],staticClass:"form-control",attrs:{type:"text",name:"name_user",placeholder:"Nombre de Usuario"},domProps:{value:t.name_user},on:{input:function(e){e.target.composing||(t.name_user=e.target.value)}}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("name_user")))])])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Correo")]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text","data-vv-name":"Correo",autocomplete:"false",pattern:"^\\w+\\.\\w+@conserflow.com$",placeholder:"Correo"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("Correo")))])]),t._v(" "),e("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Password")]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"password",placeholder:"Nueva Contraseña","data-vv-name":"Contraseña"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("Contraseña")))])])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-2",attrs:{for:"text-input"}},[t._v("Ubicacion")]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.tipo_ubicacion_id,expression:"tipo_ubicacion_id"},{name:"validate",rawName:"v-validate",value:"excluded:0",expression:"'excluded:0'"}],staticClass:"form-control",attrs:{id:"tipo_ubicacion_id",name:"tipo_ubicacion_id","data-vv-as":"Ubicacion"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.tipo_ubicacion_id=e.target.multiple?a:a[0]}}},t._l(t.listaUbicaciones,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.nombre))])})),0),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("tipo_ubicacion_id")))])])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-2 form-control-label",attrs:{form:"text-empleado"}},[t._v("Empleado")]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("v-select",{attrs:{label:"nombre",options:t.listaEmpleados,"data-vv-name":"empleado"},model:{value:t.empleado_id,callback:function(e){t.empleado_id=e},expression:"empleado_id"}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("empleado")))])],1)])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.cerrarModal()}}},[e("i",{staticClass:"fas fa-window-close"}),t._v(" Cerrar")]),t._v(" "),1==t.tipoAccion?e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.GuardarUsuario()}}},[e("i",{staticClass:"fas fa-save"}),t._v(" Guardar")]):t._e(),t._v(" "),2==t.tipoAccion?e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.GuardarUsuario(0)}}},[e("i",{staticClass:"fas fa-save"}),t._v(" Actualizar")]):t._e()])])])])],1)])}),[],!1,null,null,null).exports},49669:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>c});var s=a(18785),o=a(96225).call(void 0);const n={data:function(){return{url:"/usuario",tipoPermisos:{id:0,nombre:""},modal:0,tituloModal:"",tipoAccion:0,isLoading:!1,columns:["id","name","name_user"],list_usuarios:[],tableModulos:[],tableMenus:[],events:[],tableSubMenus:[],menus:[],submenus:[],options:{headings:{name:"Usuario",id:"Acciones",name_user:"Usuario"},perPage:10,perPageValues:[],skin:o.skin,sortIcon:o.sortIcon,filterByColumn:!0,texts:o.texts}}},methods:{GetUsers:function(){var t=this;axios.get("sistema/usuariosactivos").then((function(e){t.list_usuarios=e.data.usuarios}))},crear:function(){var t=this;axios.get("/PermisoUser/create").then((function(e){t.tableModulos=e.data})).catch((function(t){console.log(t)}))},editado:function(){var t=this;axios.get("/PermisoUser/edit").then((function(e){t.tableSubMenus=e.data})).catch((function(t){console.log(t)}))},tablamenu:function(){var t=this;axios.get("/PermisoUser/0").then((function(e){t.tableMenus=e.data})).catch((function(t){console.log(t)}))},menusupdate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;axios({method:a?"POST":"PUT",url:a?this.url:"/PermisoUser/"+t+"/actualizar",data:{modulo:e.modulo_id,id:t,id_menu:e.id}}).then((function(t){t.data.status?toastr.success(" Actualizada Correctamente"):swal({type:"error",html:t.data.errors.join("<br>")})})).catch((function(t){console.log(t)}))},submenusupdate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;axios({method:a?"POST":"PUT",url:a?this.url:"/PermisoUser/"+t+"/actualizarsub",data:{menu_id:e.elementos_menu_id,id:t,id_submenu:e.id}}).then((function(t){t.data.status?toastr.success(" Actualizada Correctamente"):swal({type:"error",html:t.data.errors.join("<br>")})})).catch((function(t){console.log(t)}))},cerrarModal:function(){this.modal=0,this.tituloModal="",s.A.resetObject(this.tipoPermisos)},abrirModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.modal=1,this.tituloModal="Actualizar Permisos",this.tipoAccion=2,this.tipoPermisos.id=t.id;var e=t.id;this.tipoPermisos.nombre=t.name;var a=[],s=[];axios.get("/menusidemp/"+e).then((function(t){for(var e=0;e<t.data.length;e++)a.push(t.data[e].elementos_menu_id),s.push(t.data[e].elementos_submenu_id)})),this.menus=a,this.submenus=s}},mounted:function(){this.GetUsers(),this.crear(),this.editado(),this.tablamenu()}};var r=a(85072),i=a.n(r),l=a(19485),u={insert:"head",singleton:!1};i()(l.A,u);l.A.locals;const c=(0,a(14486).A)(n,(function(){var t=this,e=t._self._c;return e("main",{staticClass:"main"},[e("div",{},[e("div",{staticClass:"card"},[t._m(0),t._v(" "),e("div",{staticClass:"card-body"},[e("v-client-table",{ref:"myTable",attrs:{columns:t.columns,data:t.list_usuarios,options:t.options},scopedSlots:t._u([{key:"id",fn:function(a){return[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[e("div",{staticClass:"btn-group dropup",attrs:{role:"group"}},[e("button",{staticClass:"btn btn-outline-dark dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fas fa-grip-horizontal mr-1"}),t._v("Acciones\n                                ")]),t._v(" "),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"btnGroupDrop1"}},[[e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.abrirModal(a.row)}}},[e("i",{staticClass:"fas fa-edit"}),t._v("Actualizar Permisos\n                                        ")])]],2)])])]}}])})],1)])]),t._v(" "),e("div",{staticClass:"modal fade",class:{mostrar:t.modal},staticStyle:{display:"none"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),e("div",{staticClass:"modal-dialog modal-dark modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",[e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title",domProps:{textContent:t._s(t.tituloModal)}}),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.cerrarModal()}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("x")])])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"ml-3 form-control-label font-weight-bold",attrs:{for:"nombre"}},[t._v("Usuario")]),t._v(" "),e("div",{staticClass:"col-md-6"},[null!=t.tipoPermisos?[e("label",[t._v(t._s(t.tipoPermisos.nombre))])]:t._e()],2)]),t._v(" "),e("div",{staticClass:"table-scroll"},[e("table",{staticClass:"table-main table"},[e("thead",{staticClass:"thead-dark"},[e("tr",{staticClass:"header-modulo"},[t._l(t.tableModulos,(function(a,s){return[e("td",{key:s,staticClass:"a"},[e("div",{staticClass:"text-center1 item"},[t._v("\n                                                    "+t._s(a.nombre)+"\n                                                ")])])]}))],2),t._v(" "),e("tr",t._l(t.tableModulos,(function(a){return e("td",{key:a.id},t._l(t.tableMenus,(function(s){return e("div",{key:s.id},[a.id==s.m.modulo_id?e("div",{staticClass:"form-check checkbox"},[null!=s.m.page?[e("input",{directives:[{name:"model",rawName:"v-model",value:t.menus,expression:"menus"}],attrs:{id:"smn_"+s.m.id,type:"checkbox"},domProps:{value:s.m.id,checked:Array.isArray(t.menus)?t._i(t.menus,s.m.id)>-1:t.menus},on:{change:[function(e){var a=t.menus,o=e.target,n=!!o.checked;if(Array.isArray(a)){var r=s.m.id,i=t._i(a,r);o.checked?i<0&&(t.menus=a.concat([r])):i>-1&&(t.menus=a.slice(0,i).concat(a.slice(i+1)))}else t.menus=n},function(e){return t.menusupdate(t.tipoPermisos.id,s.m,0)}]}}),t._v(" "),e("label",{staticClass:"form-check-label",staticStyle:{"margin-left":"-1rem"},attrs:{for:"smn_"+s.m.id}},[t._v("\n                                                            "+t._s(s.m.name)+"\n                                                        ")])]:t._e(),t._v(" "),null==s.m.page?[e("a",{staticClass:"nav-link",attrs:{href:"#",role:"tab"}},[t._v(t._s(s.m.name))]),t._v(" "),t._l(s.s,(function(a){return e("div",{key:a.id},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.submenus,expression:"submenus"}],attrs:{id:"mn_"+a.id,type:"checkbox"},domProps:{value:a.id,checked:Array.isArray(t.submenus)?t._i(t.submenus,a.id)>-1:t.submenus},on:{change:[function(e){var s=t.submenus,o=e.target,n=!!o.checked;if(Array.isArray(s)){var r=a.id,i=t._i(s,r);o.checked?i<0&&(t.submenus=s.concat([r])):i>-1&&(t.submenus=s.slice(0,i).concat(s.slice(i+1)))}else t.submenus=n},function(e){return t.submenusupdate(t.tipoPermisos.id,a,0)}]}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"mn_"+a.id}},[t._v("\n                                                                "+t._s(a.submenu)+"\n                                                            ")])])}))]:t._e()],2):t._e()])})),0)})),0)])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.cerrarModal()}}},[e("i",{staticClass:"fas fa-times"}),t._v(" Cerrar")])])])])])],1)])}),[function(){var t=this._self._c;return t("div",{staticClass:"card-header"},[t("i",{staticClass:"fa fa-align-justify"}),this._v(" Asignar permisos\n            ")])}],!1,null,null,null).exports},94921:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>o});a(18785),a(96225).call(void 0);const s={data:function(){return{url:"/usuario",tipoPermisos:{usuario_id:0,control_id:0,ruta:0,nombre:"",id:0},tipoAccion:0,isLoading:!1,tableMenus:[],menus:[],modulo:[],listaModulos:[],listaRutas:[],user:0,control:[],listaUsuarios:[],arreglos:[]}},methods:{getData:function(){var t=this;axios.get(t.url).then((function(e){t.listaUsuarios=e.data.usuarios})).catch((function(t){console.log(t)})),axios.get("/permisocrud").then((function(e){t.arreglos=e.data})).catch((function(t){console.log(t)})),axios.get("/ModulosSistema").then((function(e){t.listaModulos=e.data,t.isLoading=!1})).catch((function(t){console.log(t)}))},onChangePagina:function(){var t=this;axios.get("/elementospormodulos/"+this.modulo).then((function(e){t.listaRutas=e.data,t.tipoPermisos.ruta=0,t.control=[]})).catch((function(t){console.log(t)}))},onChangeElementos:function(){var t=this;t.tipoPermisos.ruta=0,t.modulo=0,t.control=[]},menusupdate:function(t){var e=this;this.$validator.validate().then((function(a){if(a){var s=e;0!=s.tipoPermisos.ruta&&0!=s.modulo&&axios({method:t?"POST":"PUT",url:t?s.url:"/PermisosCrud/"+e.tipoPermisos.id+"/actualizar",data:{usuario_id:e.user,ruta:e.tipoPermisos.ruta,control:e.control}}).then((function(t){t.data.status?toastr.success(" Actualizada Correctamente"):swal({type:"error",html:t.data.errors.join("<br>")})})).catch((function(t){console.log(t)}))}}))},permisorec:function(){var t=this,e=[];axios.post("/menusidempc",{usuario_id:this.user,ruta:this.tipoPermisos.ruta}).then((function(a){for(var s=0;s<a.data.length;s++)e.push(a.data[s].control_id);t.control=e,console.log(a)})).catch((function(t){console.error(t)}))},guardarTodos:function(){if(0!=this.user){this.isLoading=!0;var t=this;axios({method:"POST",url:"/permisocrud/todos",data:{usuario_id:this.user}}).then((function(e){t.isLoading=!1,e.data.status?toastr.success("Se asignaron todos los permisos CRUD"):swal({type:"error",html:e.data.errors.join("<br>")})})).catch((function(t){console.log(t)}))}else toastr.error("Seleccionar usuario.")}},mounted:function(){this.getData()}};const o=(0,a(14486).A)(s,(function(){var t=this,e=t._self._c;return e("main",{staticClass:"main"},[e("div",{},[e("div",{staticClass:"card"},[t._m(0),t._v(" "),e("div",{staticClass:"card-body"},[e("vue-element-loading",{attrs:{active:t.isLoading}}),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"usuario"}},[t._v("Selecciona Usuario")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.user,expression:"user"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control col-md-4",attrs:{id:"user","data-vv-name":"user",placeholder:"Usuario"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.user=e.target.multiple?a:a[0]},t.onChangeElementos]}},[e("option",{attrs:{value:"0"}},[t._v("---Usuario---")]),t._v(" "),t._l(t.listaUsuarios,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])}))],2),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("user")))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"modulo"}},[t._v("Selecciona Módulo")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modulo,expression:"modulo"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control col-md-4",attrs:{id:"modulo",name:"modulo",placeholder:"Modulo"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.modulo=e.target.multiple?a:a[0]},t.onChangePagina]}},[e("option",{attrs:{value:"0"}},[t._v("---Modulo---")]),t._v(" "),t._l(t.listaModulos,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.nombre))])}))],2),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("modulo")))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"usuario"}},[t._v("Selecciona la Ruta")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.tipoPermisos.ruta,expression:"tipoPermisos.ruta"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control col-md-4",attrs:{id:"ruta",name:"ruta",placeholder:"Ruta"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.tipoPermisos,"ruta",e.target.multiple?a:a[0])},t.permisorec]}},[e("option",{attrs:{value:"0"}},[t._v("---Rutas---")]),t._v(" "),t._l(t.listaRutas,(function(a,s){return e("option",{key:s,attrs:{pk:a.id},domProps:{value:a.page}},[t._v(t._s(a.page))])}))],2),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("ruta")))])]),t._v(" "),e("div",{staticClass:"form-group row"},[t._m(1),t._v(" "),t._l(t.arreglos,(function(a){return e("div",{key:a.id,staticClass:"form-group"},[t._v("\n                 \n              "+t._s(a.nombre)+"\n              "),e("label",{staticClass:"switch switch-default switch-pill switch-dark"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.control,expression:"control"}],staticClass:"switch-input",attrs:{type:"checkbox",checked:""},domProps:{value:a.id,checked:Array.isArray(t.control)?t._i(t.control,a.id)>-1:t.control},on:{change:function(e){var s=t.control,o=e.target,n=!!o.checked;if(Array.isArray(s)){var r=a.id,i=t._i(s,r);o.checked?i<0&&(t.control=s.concat([r])):i>-1&&(t.control=s.slice(0,i).concat(s.slice(i+1)))}else t.control=n}}}),t._v(" "),e("span",{staticClass:"switch-label"}),t._v(" "),e("span",{staticClass:"switch-handle"})]),t._v("\n                 \n            ")])}))],2),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:function(e){return t.menusupdate(0)}}},[e("i",{staticClass:"fas fa-save"}),t._v(" Guardar")]),t._v(" "),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(e){return t.guardarTodos()}}},[e("i",{staticClass:"fas fa-save"}),t._v(" Todos")])])],1)])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"card-header"},[t("i",{staticClass:"fa fa-align-justify"}),this._v("Asignar permisos de CRUD.\n          ")])},function(){var t=this._self._c;return t("div",{staticClass:"col-md-2 col-sm-2"},[t("label",{attrs:{for:"usuario"}},[this._v("Asigna permisos")])])}],!1,null,"60d1b8fd",null).exports},96225:t=>{t.exports=function(){return{dateColumns:[],listColumns:{},datepickerOptions:{locale:{cancelLabel:"Clear"}},datepickerPerColumnOptions:{},initialPage:1,perPage:10,perPageValues:[10,25,50,100],groupBy:!1,collapseGroups:!1,destroyEventBus:!1,sendEmptyFilters:!1,params:{},sortable:!0,filterable:!0,groupMeta:[],initFilters:{},customFilters:[],templates:{},debounce:250,dateFormat:"DD/MM/YYYY",dateFormatPerColumn:{},toMomentFormat:!1,skin:"table table-striped table-bordered table-hover table-sm",skinBusqueda:"table table-striped table-bordered table-hover table-sm busqueda",columnsDisplay:{},columnsDropdown:!1,texts:{count:"Mostrando del {from} al  {to} de {count} registros|{count} registros|Un registro",first:"Primero",last:"Ultimo",filter:"Buscar:",filterPlaceholder:"Buscar...",limit:"Registros:",page:"Pagina:",noResults:"No se encontraron registros",filterBy:"Filtrar por {column}",loading:"Cargando...",defaultOption:"Seleccionar {column}",columns:"Columnas"},sortIcon:{base:"fa",up:"fa-chevron-up",down:"fa-chevron-down",is:"fa-sort"},sortingAlgorithm:function(t,e){return t.sort(this.getSortFn(e))},customSorting:{},multiSorting:{},clientMultiSorting:!0,serverMultiSorting:!1,filterByColumn:!1,highlightMatches:!1,orderBy:!1,descOrderColumns:[],footerHeadings:!1,headings:{},headingsTooltips:{},pagination:{dropdown:!1,chunk:10,edge:!1,align:"center",nav:"fixed"},childRow:!1,childRowTogglerFirst:!0,uniqueKey:"id",requestFunction:!1,requestAdapter:function(t){return t},responseAdapter:function(t){var e=this.getResponseData(t);return{data:e.data,count:e.count}},requestKeys:{query:"query",limit:"limit",orderBy:"orderBy",ascending:"ascending",page:"page",byColumn:"byColumn"},rowClassCallback:!1,preserveState:!1,saveState:!1,storage:"local",columnsClasses:{},columnCondicion:[{id:1,text:"Activo"},{id:0,text:"Desactivado"}]}}}}]);